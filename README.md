<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
#Ø¢Ù…ÙˆØ²Ø´ Ú¯Ø±ÙØªÙ† Ú¯ÙˆØ§Ù‡ÛŒ SSL Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø³Ø§Ø±Ú¯Ø§Ø±Ø¯#
</head>
<body dir="rtl">

<h1>ğŸš€ Ø¢Ù…ÙˆØ²Ø´ Ú¯Ø±ÙØªÙ† Ú¯ÙˆØ§Ù‡ÛŒ SSL Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø³Ø§Ø±Ú¯Ø§Ø±Ø¯</h1>

<p>Ø³Ù„Ø§Ù…! ğŸ‘‹</p>
<p>Ø§ÛŒÙ† Ø¢Ù…ÙˆØ²Ø´ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ Ø¨Ù‡ Ø³Ø§Ø¯Ú¯ÛŒ <strong>Ú¯ÙˆØ§Ù‡ÛŒ SSL</strong> Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù…Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯Ù‡ Ùˆ Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± <strong>Ù¾Ø§Ø³Ø§Ø±Ú¯Ø§Ø±Ø¯</strong> Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯. Ø¨Ø§ Ø§ÛŒÙ† Ø±ÙˆØ´ØŒ Ø§ØªØµØ§Ù„ Ø³Ø±ÙˆØ± Ø´Ù…Ø§ Ø§Ù…Ù† Ùˆ Ù…Ø¹ØªØ¨Ø± Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯ Ùˆ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ù†Ø¬Ø§Ù… Ù…Ø±Ø§Ø­Ù„ Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ø¯Ø³ØªÛŒ Ù†Ø®ÙˆØ§Ù‡ÛŒØ¯ Ø¯Ø§Ø´Øª.</p>
<p>Ø§ÛŒÙ† Ø¢Ù…ÙˆØ²Ø´ Ù…Ø®ØµÙˆØµ Ø§ÙØ±Ø§Ø¯ÛŒ Ø§Ø³Øª Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù†Ø¯ Ø¨Ø§ <strong>ÛŒÚ© Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¢Ù…Ø§Ø¯Ù‡</strong>ØŒ Ú¯ÙˆØ§Ù‡ÛŒ SSL Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯Ù‡ Ùˆ Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Pasarguard Ù†ØµØ¨ Ú©Ù†Ù†Ø¯.</p>

<hr>

<h2>ğŸ“ Ù…Ø±Ø­Ù„Ù‡ Û±: Ø³Ø§Ø®Øª ÙØ§ÛŒÙ„ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª</h2>
<p>ÛŒÚ© ÙØ§ÛŒÙ„ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø§ Ù†Ø§Ù… <code>get_cert.sh</code> Ø¨Ø³Ø§Ø²ÛŒØ¯:</p>
<pre><code>nano get_cert.sh</code></pre>

<hr>

<h2>ğŸ“ Ù…Ø±Ø­Ù„Ù‡ Û²: Ù…Ø­ØªÙˆÛŒØ§Øª Ø§Ø³Ú©Ø±ÛŒÙ¾Øª</h2>
<p>Ù…Ø­ØªÙˆÛŒØ§Øª Ø²ÛŒØ± Ø±Ø§ Ø¯Ø§Ø®Ù„ ÙØ§ÛŒÙ„ <code>get_cert.sh</code> Ù¾ÛŒØ³Øª Ú©Ù†ÛŒØ¯.</p>
<blockquote>
<p><strong>ØªÙˆØ¬Ù‡:</strong> Ù‚Ø¨Ù„ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ØŒ Ø¯Ø± Ø®Ø· Ù¾Ù†Ø¬Ù… <code>YOURDOMAIN.COM</code> Ø±Ø§ Ø¨Ø§ Ø¯Ø§Ù…Ù†Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ø®ÙˆØ¯ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†ÛŒØ¯.</p>
</blockquote>

<pre><code>#!/bin/bash

# ====== Tanzimat ======
DOMAIN="YOURDOMAIN.COM"
DEST_DIR="/var/lib/pasarguard/certs/$DOMAIN"

# ====== Barrasi va Nasb Certbot ======
if ! command -v certbot > /dev/null; then
    echo "[INFO] Certbot nasb nist, dar hal nasb..."
    sudo apt update
    sudo apt install snapd -y
    sudo snap install core; sudo snap refresh core
    sudo snap install --classic certbot
    sudo ln -s /snap/bin/certbot /usr/bin/certbot
else
    echo "[INFO] Certbot nasb ast."
fi

# ====== Sakht Masir Nahayi ======
sudo mkdir -p "$DEST_DIR"

# ====== Gereftan Gavahi SSL ======
echo "[INFO] dar hal gereftan gavahi SSL baraye $DOMAIN ..."
sudo certbot certonly \
  --standalone \
  --agree-tos \
  --register-unsafely-without-email \
  -d "$DOMAIN" \
  --cert-path "$DEST_DIR/cert.pem" \
  --key-path "$DEST_DIR/privkey.pem" \
  --fullchain-path "$DEST_DIR/fullchain.pem" \
  --chain-path "$DEST_DIR/chain.pem" \
  --preferred-challenges http \
  --non-interactive

echo "[INFO] amaliat tamam shod. fayl-haye gavahi dar masir $DEST_DIR gharar darand."
</code></pre>

<hr>

<h2>âš™ï¸ Ù…Ø±Ø­Ù„Ù‡ Û³: Ø¯Ø§Ø¯Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¬Ø±Ø§ÛŒÛŒ Ø¨Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª</h2>
<pre><code>chmod +x get_cert.sh</code></pre>

<hr>

<h2>ğŸš€ Ù…Ø±Ø­Ù„Ù‡ Û´: Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙØªÙ† Ú¯ÙˆØ§Ù‡ÛŒ SSL</h2>
<pre><code>sudo ./get_cert.sh</code></pre>

<hr>

<h2>ğŸ’¡ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…: Ø§Ù†ØªÙ‚Ø§Ù„ Ø¯Ø³ØªÛŒ Ú¯ÙˆØ§Ù‡ÛŒ</h2>
<p>Ø§Ú¯Ø± Ø§Ø² Ù‚Ø¨Ù„ Ú¯ÙˆØ§Ù‡ÛŒ SSL Ú¯Ø±ÙØªÙ‡â€ŒØ§ÛŒØ¯ Ùˆ ÙÙ‚Ø· Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¢Ù† Ø±Ø§ Ø¨Ù‡ Ù…Ø³ÛŒØ± Pasarguard Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒØ¯:</p>

<pre><code>sudo mkdir -p /var/lib/pasarguard/certs/YOURDOMAIN.COM
sudo cp /etc/letsencrypt/live/YOURDOMAIN.COM/fullchain.pem /var/lib/pasarguard/certs/YOURDOMAIN.COM/
sudo cp /etc/letsencrypt/live/YOURDOMAIN.COM/privkey.pem /var/lib/pasarguard/certs/YOURDOMAIN.COM/</code></pre>

<hr>

<h2>ğŸ“Œ Ø¢Ø¯Ø±Ø³ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ú¯ÙˆØ§Ù‡ÛŒ Ø¯Ø± Pasarguard</h2>
<p>Ù¾Ø³ Ø§Ø² Ø¯Ø±ÛŒØ§ÙØª ÛŒØ§ Ø§Ù†ØªÙ‚Ø§Ù„ Ú¯ÙˆØ§Ù‡ÛŒØŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø¯Ø± Ù…Ø³ÛŒØ± Ø²ÛŒØ± Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ù†Ø¯:</p>
<pre><code>â­ Private key: /var/lib/pasarguard/certs/YOURDOMAIN.COM/privkey.pem
â­ Full chain: /var/lib/pasarguard/certs/YOURDOMAIN.COM/fullchain.pem</code></pre>


</body>
</html>
